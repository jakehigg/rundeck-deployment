//# sourceMappingURL=job-remote-options.js.map
function RemoteOptionController(f){function e(a){return!a||""===a}var a=this;a.loader=f.loader;a.options={};a.dependents={};a.dependencies={};a.names=[];a.observers={};a.cyclic=!1;a.setupOptions=function(b){ko.utils.arrayForEach(b.options(),function(b){a.addOption(b);b.hasRemote()&&b.setReloadCallback(a.reloadOptionIfRequirementsMet)})};a.addOption=function(b){a.options[b.name()]=b;a.names.push(b.name())};a.addLocalOption=function(b){a.names.push(b)};a.loadRemoteOptionValues=function(b){var c=a.options[b];
a.loader.loadRemoteOptionValues(c,a.options).then(function(a){c.loadRemote(a)})};a.addOptionDeps=function(b,c){a.dependents[b]=c};a.addOptionDependencies=function(b,c){a.dependencies[b]=c};a.reloadOptionIfRequirementsMet=function(b){var c=!1,d=[];if(a.dependencies[b])for(var e=0;e<a.dependencies[b].length;e++){var f=a.dependencies[b][e],g=a.options[f];!g.value()&&g.required()&&(c=!0,d.push(f))}c?a.options[b]&&a.options[b].remoteError({message:message("options.remote.dependency.missing.required",[b,
d.join(", ")])}):a.loadRemoteOptionValues(b)};a.optionValueChanged=function(b,c){if(a.dependents[b]&&!a.cyclic)for(var d=0;d<a.dependents[b].length;d++)a.reloadOptionIfRequirementsMet(a.dependents[b][d])};a.shouldAutoReload=function(b){var c=a.options[b];return c.hasRemote()?!(a.cyclic||!a.dependents[b]&&e(c.value())):!!(a.dependents[b]&&c.enforced()||!e(c.value()))};a.shouldLoadOnStart=function(b){return a.options[b].hasRemote()&&(!a.dependencies[b]||a.cyclic)};a.doOptionAutoReload=function(b){if(a.shouldAutoReload(b)){var c=
a.options[b].value();a.optionValueChanged(b,c);return!0}return!1};a.loadData=function(b){if(b){b.optionsDependenciesCyclic&&(a.cyclic=b.optionsDependenciesCyclic);for(var c in b.options){var d=b.options[c];d.optionDependencies&&a.addOptionDependencies(c,d.optionDependencies);d.optionDeps&&a.addOptionDeps(c,d.optionDeps)}}};a.unsubscribeAll=function(){for(var b in a.observers)a.observers[b].dispose();a.observers={}};a.observeChangesFor=function(b){a.observers[b]=a.options[b].value.subscribe(function(c){a.optionValueChanged(b,
c)})};a.begin=function(){for(var b=0;b<a.names.length;b++){var c=a.names[b];a.shouldLoadOnStart(c)&&a.loadRemoteOptionValues(c);a.doOptionAutoReload(a.names[b])}for(b=0;b<a.names.length;b++)a.observeChangesFor(a.names[b])}}
function RemoteOptionLoader(f){var e=this;e.url=f.url;e.fieldPrefix=f.fieldPrefix;e.id=f.id;e.loadRemoteOptionValues=function(a,b){a.loading(!0);var c={option:a.name(),selectedvalue:a.value(),id:e.id};if(null!=b)for(var d in b)d!=a.name()&&(c[e.fieldPrefix+d]=b[d].value());return jQuery.ajax({method:"GET",type:"json",url:_genUrl(e.url,c),success:function(b,c,d){setTimeout(a.loading.curry(!1),200)},error:function(b,c,d){setTimeout(a.loading.curry(!1),200);a.remoteError({error:"ERROR loading result from Rundeck server: "+
c+": "+d})}})}};