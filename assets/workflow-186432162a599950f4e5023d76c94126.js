//# sourceMappingURL=workflow.js.map
function _wfTypeForStep(a){if("undefined"!=typeof a){if(a.exec)return"command";if(a.jobref)return"job";if(a.script)return"script";if(a.scriptfile)return"scriptfile";if(a.scripturl)return"scripturl";if(a.type)return a.nodeStep?"node-step-plugin plugin":null==a.nodeStep||a.nodeStep?"plugin":"workflow-step-plugin plugin"}return"console"}
function _wfStringForStep(a){var b="";if("undefined"!=typeof a)a.description?b=a.description:a.exec?b="Command":a.jobref?b=(a.jobref.group?a.jobref.group+"/":"")+a.jobref.name:a.script?b="Script":a.scriptfile?b="File":a.scripturl?b="URL":a.type&&(b="Plugin "+a.type,a.nodeStep&&RDWorkflow.nodeSteppluginDescriptions&&RDWorkflow.nodeSteppluginDescriptions[a.type]?b=RDWorkflow.nodeSteppluginDescriptions[a.type].title||b:!a.nodeStep&&RDWorkflow.wfSteppluginDescriptions&&RDWorkflow.wfSteppluginDescriptions[a.type]&&
(b=RDWorkflow.wfSteppluginDescriptions[a.type].title||b));else return"[?]";return b}
var RDWorkflow=Class.create({workflow:null,initialize:function(a,b){this.workflow=a;Object.extend(this,b)},contextType:function(a){"string"==typeof a&&(a=RDWorkflow.parseContextId(a));a=this.workflow[RDWorkflow.workflowIndexForContextId(a[0])];return _wfTypeForStep(a)},renderContextStepNumber:function(a){"string"==typeof a&&(a=RDWorkflow.parseContextId(a));a=""+RDWorkflow.stepNumberForContextId(a[0]);return a+". "},renderContextString:function(a){"string"==typeof a&&(a=RDWorkflow.parseContextId(a));
a=this.workflow[RDWorkflow.workflowIndexForContextId(a[0])];return _wfStringForStep(a)}});RDWorkflow.unescape=function(a,b,h,c){for(var f=[],d=!1,g=0,k=null;g<a.length;g++){var e=a.charAt(g);if(e==b)d?(f.push(b),d=!1):d=!0;else if(0<=h.indexOf(e))if(d)f.push(e),d=!1;else if(0<=c.indexOf(e)){k=e;break}else f.push(e);else d&&(f.push(b),d=!1),f.push(e)}return{text:f.join(""),bchar:k,rest:g<=a.length-1?a.substring(g+1):null}};
RDWorkflow.splitEscaped=function(a,b){for(var h=[],c=a;c;)c=RDWorkflow.unescape(c,"\\",["\\","/"],[b]),h.push(c.text),c=c.rest;return h};RDWorkflow.contextStringSeparator="/";RDWorkflow.parseContextId=function(a){return null==a?null:RDWorkflow.splitEscaped(a,RDWorkflow.contextStringSeparator).slice()};RDWorkflow.paramsForContextId=function(a){a=a.match(/^(\d+)(e)?(@(.+))?$/);return a[4]?a[4].replace(/\\([/@,=])/g,"$1"):null};
RDWorkflow.isErrorhandlerForContextId=function(a){return"e"==a.match(/^(\d+)(e)?(@.+)?$/)[2]?!0:!1};RDWorkflow.stepNumberForContextId=function(a){a=a.match(/^(\d+)(e)?(@.+)?$/);return a[1]?parseInt(a[1]):null};RDWorkflow.workflowIndexForContextId=function(a){a=RDWorkflow.stepNumberForContextId(a);return null!=a?a-1:null};RDWorkflow.cleanContextId=function(a){a=RDWorkflow.parseContextId(a);for(var b=0;b<a.length;b++)a[b]=RDWorkflow.stepNumberForContextId(a[b]);return a.join(RDWorkflow.contextStringSeparator)};